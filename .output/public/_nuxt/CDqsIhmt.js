import{S as f}from"./DPSPmDFn.js";import{u as t,a as d}from"./B-KAnzSu.js";const r=f("favouriteUser",{state:()=>({}),getters:{},actions:{async addToFavourite(e){let i=(await $fetch(`https://dexone.ru/backend_shop/favourite/${t().user}`,{method:"GET"})).favourites;i[e.id]=1,await $fetch(`https://dexone.ru/backend_shop/favourite/${t().user}`,{method:"PATCH",body:{favourites:i}})},async deleteFromFavourite(e){let i=(await $fetch(`https://dexone.ru/backend_shop/favourite/${t().user}`,{method:"GET"})).favourites;delete i[e],await $fetch(`https://dexone.ru/backend_shop/favourite/${t().user}`,{method:"PATCH",body:{favourites:i}})},findFavourite(){setTimeout(()=>{d.get(`https://dexone.ru/backend_shop/favourite/${t().user}`).then(e=>{u().simile={};let i=Object.keys(e.data.favourites).map(a=>Number(a)),s=Object.values(e.data.favourites);for(let a=1;a<23;a++)i.indexOf(a)>=0?u().simile[a]=s[i.indexOf(a)]:u().simile[a]=0})},500)}},persist:!0}),u=f("favouriteStore",{state:()=>({favourite:{},simile:{}}),getters:{getFavourite:e=>e.favourite,getSimile:e=>e.simile},actions:{async addToFavourite(e){t().user==1&&(this.favourite[e.id]=1),t().user>1&&r().addToFavourite(e)},async deleteFromFavourite(e){t().user==1&&delete this.favourite[e],t().user>1&&r().deleteFromFavourite(e)},findFavourite(){if(t().user==1){this.simile={};let o=Object.keys(this.favourite).map(s=>Number(s)),i=Object.values(this.favourite);for(let s=1;s<23;s++)o.indexOf(s)>=0?this.simile[s]=i[o.indexOf(s)]:this.simile[s]=0}t().user>1&&r().findFavourite()}},persist:!0});export{u};
